:root{
  --bg1:#2b0036; --bg2:#5a1f6b; --accent:#ff8fb1; --pale:#ffeef6;
  --card:#fff; --card-text:#1b0b12;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased;color:#fff}
.wrap{min-height:100vh;display:flex;flex-direction:column;padding:16px;align-items:stretch}
.top{text-align:center;margin-top:6px}
.top h1{margin:0;font-size:20px}
.subtitle{margin:4px 0 0;color:rgba(255,255,255,0.86);font-size:13px}

/* sky */
.sky{
  margin:16px auto;
  width:100%;
  max-width:820px;
  height:66vh;
  min-height:440px;
  border-radius:16px;
  position:relative;
  overflow:hidden;
  padding:0;
  background:
    radial-gradient(1200px 400px at 10% 20%, rgba(255,140,177,0.06), transparent 10%),
    radial-gradient(800px 300px at 90% 80%, rgba(255,255,255,0.02), transparent 30%),
    linear-gradient(180deg, rgba(255,255,255,0.02), transparent 30%),
    linear-gradient(180deg,#231028,#2c1140);
  box-shadow:0 8px 30px rgba(0,0,0,0.45), inset 0 0 40px rgba(255,143,177,0.03);
}

/* moon */
.moon{
  position:absolute;right:10%;top:8%;width:68px;height:68px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #ffeef6, #ffdff0 20%, #f8d2e6 40%, transparent 60%);
  box-shadow:0 6px 22px rgba(255,143,177,0.08);
}

/* twinkles */
.twinkles{position:absolute;inset:0;pointer-events:none}
.twinkle{position:absolute;width:2px;height:2px;border-radius:50%;background:#fff;opacity:.75;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.45))}

/* main star hearts container */
.main-stars{position:absolute;inset:0;pointer-events:auto}

/* heart-button (main interactive) */
.heart-btn{
  position:absolute;transform:translate(-50%,-50%);border:0;background:transparent;padding:0;cursor:pointer;
  -webkit-tap-highlight-color: transparent;
}
.heart-btn.disabled{opacity:.28;cursor:default}
.heart-svg{width:56px;height:56px;display:block;transition:transform .18s ease,opacity .18s ease;filter:drop-shadow(0 8px 24px rgba(0,0,0,0.35))}
.heart-core{fill: #ffd7e6 }
.heart-glow{filter: blur(6px);opacity:.6}

/* unlocked pulse */
.heart-btn.unlocked .heart-svg{animation:pulse 2500ms infinite ease-in-out}
@keyframes pulse{0%{transform:scale(1);opacity:0.95}50%{transform:scale(1.08);opacity:1}100%{transform:scale(1);opacity:0.95}}

/* modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:14px;background:linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.55));opacity:0;pointer-events:none;transition:opacity .18s ease}
.modal.show{opacity:1;pointer-events:auto}
.card{width:100%;max-width:420px;background:var(--card);color:var(--card-text);border-radius:14px;padding:18px;box-shadow:0 10px 40px rgba(0,0,0,0.4);position:relative}
.close{position:absolute;right:12px;top:10px;border:0;background:transparent;font-size:18px;cursor:pointer}
.modal-text{color:#222;margin:8px 0 12px;line-height:1.45}

/* letters canvas layer */
.canvas-layer{position:absolute;inset:0;width:100%;height:100%;display:block}

/* footer */
.foot{text-align:center;margin-top:12px;color:rgba(255,255,255,0.86)}
.hint{font-size:13px;color:rgba(255,255,255,0.6)}

/* responsiveness */
@media (max-width:520px){
  .sky{height:70vh;min-height:520px;border-radius:12px}
  .heart-svg{width:48px;height:48px}
  .card{padding:14px}
}
